<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>Poller (threadly 7.0 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Poller (threadly 7.0 API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.threadly.concurrent</a></div>
<h2 title="Class Poller" class="title">Class Poller</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.threadly.concurrent.Poller</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public class <span class="typeNameLabel">Poller</span>
extends java.lang.Object</pre>
<div class="block">Simple class for watching a condition and getting notified when a state has changed.  One handy 
 tool is the ability to transition java's <code>Future</code> into Threadly's much nicer 
 <a href="future/ListenableFuture.html" title="interface in org.threadly.concurrent.future"><code>ListenableFuture</code></a>.
 <p>
 The frequency at which this polls should be determined based off how cheap polling is, and how 
 many items will be polled on average.
 <p>
 If being allowed to garbage collect, this poller will continue to schedule itself as long as
 there are outstanding futures.  Once all have completed (from timeout or naturally), then this
 will stop scheduling itself to poll for updates.  Thus no explicit cleanup is needed.  As long 
 as the <code>Supplier</code>'s are quick/fast (<code>Future</code> conversions are always quick/fast), 
 it's most efficient to reuse the <a href="Poller.html" title="class in org.threadly.concurrent"><code>Poller</code></a> instance.  But if you need dynamic 
 timeout's/max wait time you could construct a <a href="Poller.html" title="class in org.threadly.concurrent"><code>Poller</code></a> and toss it away once you get the 
 returned <a href="future/ListenableFuture.html" title="interface in org.threadly.concurrent.future"><code>ListenableFuture</code></a> from it.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>5.0</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.threadly.concurrent.SubmitterScheduler,long)">Poller</a></span>&#8203;(<a href="SubmitterScheduler.html" title="interface in org.threadly.concurrent">SubmitterScheduler</a>&nbsp;scheduler,
      long&nbsp;pollFrequency)</code></th>
<td class="colLast">
<div class="block">Construct a new poller which will run on the provided scheduler, and run at the specified
 frequency.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.threadly.concurrent.SubmitterScheduler,long,long)">Poller</a></span>&#8203;(<a href="SubmitterScheduler.html" title="interface in org.threadly.concurrent">SubmitterScheduler</a>&nbsp;scheduler,
      long&nbsp;pollFrequency,
      long&nbsp;maxWaitTime)</code></th>
<td class="colLast">
<div class="block">Construct a new poller which will run on the provided scheduler, and run at the specified
 frequency.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;<a href="future/ListenableFuture.html" title="interface in org.threadly.concurrent.future">ListenableFuture</a>&lt;?&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#consumeQueue(java.util.Queue,java.util.function.Consumer)">consumeQueue</a></span>&#8203;(java.util.Queue&lt;? extends T&gt;&nbsp;queue,
            java.util.function.Consumer&lt;? super T&gt;&nbsp;consumer)</code></th>
<td class="colLast">
<div class="block">Consumes from a queue, checking for items and providing them to a <code>Consumer</code> as they 
 become available.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;<a href="future/ListenableFuture.html" title="interface in org.threadly.concurrent.future">ListenableFuture</a>&lt;?&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#consumeQueue(java.util.Queue,java.util.function.Consumer,org.threadly.util.ExceptionHandler)">consumeQueue</a></span>&#8203;(java.util.Queue&lt;? extends T&gt;&nbsp;queue,
            java.util.function.Consumer&lt;? super T&gt;&nbsp;consumer,
            <a href="../util/ExceptionHandler.html" title="interface in org.threadly.util">ExceptionHandler</a>&nbsp;exceptionHandler)</code></th>
<td class="colLast">
<div class="block">Consumes from a queue, checking for items and providing them to a <code>Consumer</code> as they 
 become available.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;<a href="future/ListenableFuture.html" title="interface in org.threadly.concurrent.future">ListenableFuture</a>&lt;T&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#watch(java.util.concurrent.Future)">watch</a></span>&#8203;(java.util.concurrent.Future&lt;? extends T&gt;&nbsp;f)</code></th>
<td class="colLast">
<div class="block">Convert a conventional <code>Future</code> into a <a href="future/ListenableFuture.html" title="interface in org.threadly.concurrent.future"><code>ListenableFuture</code></a>.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="future/ListenableFuture.html" title="interface in org.threadly.concurrent.future">ListenableFuture</a>&lt;?&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#watch(java.util.function.Supplier)">watch</a></span>&#8203;(java.util.function.Supplier&lt;java.lang.Boolean&gt;&nbsp;p)</code></th>
<td class="colLast">
<div class="block">Watch suppliers returned condition.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(org.threadly.concurrent.SubmitterScheduler,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Poller</h4>
<pre>public&nbsp;Poller&#8203;(<a href="SubmitterScheduler.html" title="interface in org.threadly.concurrent">SubmitterScheduler</a>&nbsp;scheduler,
              long&nbsp;pollFrequency)</pre>
<div class="block">Construct a new poller which will run on the provided scheduler, and run at the specified
 frequency.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>scheduler</code> - Scheduler to run polling task on</dd>
<dd><code>pollFrequency</code> - Time in milliseconds to wait between polling events</dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(org.threadly.concurrent.SubmitterScheduler,long,long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Poller</h4>
<pre>public&nbsp;Poller&#8203;(<a href="SubmitterScheduler.html" title="interface in org.threadly.concurrent">SubmitterScheduler</a>&nbsp;scheduler,
              long&nbsp;pollFrequency,
              long&nbsp;maxWaitTime)</pre>
<div class="block">Construct a new poller which will run on the provided scheduler, and run at the specified
 frequency.
 <p>
 This constructor additionally allows you to specify the maximum time in millseconds we should
 wait for the condition to become true.  At this point if we are still not seeing our expected
 polling state, then the return future will be canceled.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>scheduler</code> - Scheduler to run polling task on</dd>
<dd><code>pollFrequency</code> - Time in milliseconds to wait between polling events</dd>
<dd><code>maxWaitTime</code> - Maximum time in milliseconds till returned futures should be canceled</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="watch(java.util.function.Supplier)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>watch</h4>
<pre class="methodSignature">public&nbsp;<a href="future/ListenableFuture.html" title="interface in org.threadly.concurrent.future">ListenableFuture</a>&lt;?&gt;&nbsp;watch&#8203;(java.util.function.Supplier&lt;java.lang.Boolean&gt;&nbsp;p)</pre>
<div class="block">Watch suppliers returned condition.  Once Supplier is witnessed in the <code>true</code> state, the
 returned future is completed.  Listeners and FutureCallback's executed on the returned future
 without a specified pool will run on the polling thread, and so should be kept to a minimum.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>p</code> - Supplier to provide state for when poll has completed as expected</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Future to complete once boolean state is witnessed as <code>true</code></dd>
</dl>
</li>
</ul>
<a id="watch(java.util.concurrent.Future)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>watch</h4>
<pre class="methodSignature">public&nbsp;&lt;T&gt;&nbsp;<a href="future/ListenableFuture.html" title="interface in org.threadly.concurrent.future">ListenableFuture</a>&lt;T&gt;&nbsp;watch&#8203;(java.util.concurrent.Future&lt;? extends T&gt;&nbsp;f)</pre>
<div class="block">Convert a conventional <code>Future</code> into a <a href="future/ListenableFuture.html" title="interface in org.threadly.concurrent.future"><code>ListenableFuture</code></a>.  As poller runs it 
 will check if the provided future has completed.  Once it does complete the returned future 
 will also complete in the exact same way.  Canceling the returned future will have NO impact 
 on the provided future (and thus the use with a timeout is not a concern to interrupting the 
 provided future).  Because this is only checked at poll intervals the returned future's 
 completion will be delayed by that polling delay.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - Type of object returned from future</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>f</code> - Future to monitor for completetion</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>ListenableFuture that will provide the result from the source future</dd>
</dl>
</li>
</ul>
<a id="consumeQueue(java.util.Queue,java.util.function.Consumer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>consumeQueue</h4>
<pre class="methodSignature">public&nbsp;&lt;T&gt;&nbsp;<a href="future/ListenableFuture.html" title="interface in org.threadly.concurrent.future">ListenableFuture</a>&lt;?&gt;&nbsp;consumeQueue&#8203;(java.util.Queue&lt;? extends T&gt;&nbsp;queue,
                                            java.util.function.Consumer&lt;? super T&gt;&nbsp;consumer)</pre>
<div class="block">Consumes from a queue, checking for items and providing them to a <code>Consumer</code> as they 
 become available.  The poll interval is not the minimum consumption speed, but rather the 
 resolution / delay that will occur after the queue is seen in an empty state.  If items are 
 available they will be provided to the <code>Consumer</code> as fast as possible.  The
 <code>Consumer</code> will not be invoked in parallel, so if concurrent consumption is desired it 
 must execute to a pool.
 <p>
 Because queue consumption is likely a long running process, this operation will ignore any 
 timeout provided to the <a href="#%3Cinit%3E(org.threadly.concurrent.SubmitterScheduler,long,long)"><code>Poller(SubmitterScheduler, long, long)</code></a> constructor.
 <p>
 The returned future will never complete on its own.  It can only be used for stopping the 
 consumption from the queue by invoking <code>Future.cancel(boolean)</code>.  If 
 you never want to stop the queue consumption then the returned <a href="future/ListenableFuture.html" title="interface in org.threadly.concurrent.future"><code>ListenableFuture</code></a> can be 
 ignored.
 <p>
 If any errors occur <a href="../util/ExceptionUtils.html#handleException(java.lang.Throwable)"><code>ExceptionUtils.handleException(Throwable)</code></a> will be invoked.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - The type of object to consume from the queue</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>queue</code> - The queue to poll items from as they are available</dd>
<dd><code>consumer</code> - The <code>Consumer</code> to provide items to as they are available</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A future which can stop consumption through <code>cancel(boolean)</code></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>5.37</dd>
</dl>
</li>
</ul>
<a id="consumeQueue(java.util.Queue,java.util.function.Consumer,org.threadly.util.ExceptionHandler)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>consumeQueue</h4>
<pre class="methodSignature">public&nbsp;&lt;T&gt;&nbsp;<a href="future/ListenableFuture.html" title="interface in org.threadly.concurrent.future">ListenableFuture</a>&lt;?&gt;&nbsp;consumeQueue&#8203;(java.util.Queue&lt;? extends T&gt;&nbsp;queue,
                                            java.util.function.Consumer&lt;? super T&gt;&nbsp;consumer,
                                            <a href="../util/ExceptionHandler.html" title="interface in org.threadly.util">ExceptionHandler</a>&nbsp;exceptionHandler)</pre>
<div class="block">Consumes from a queue, checking for items and providing them to a <code>Consumer</code> as they 
 become available.  The poll interval is not the minimum consumption speed, but rather the 
 resolution / delay that will occur after the queue is seen in an empty state.  If items are 
 available they will be provided to the <code>Consumer</code> as fast as possible.  The
 <code>Consumer</code> will not be invoked in parallel, so if concurrent consumption is desired it 
 must execute to a pool.
 <p>
 Because queue consumption is likely a long running process, this operation will ignore any 
 timeout provided to the <a href="#%3Cinit%3E(org.threadly.concurrent.SubmitterScheduler,long,long)"><code>Poller(SubmitterScheduler, long, long)</code></a> constructor.
 <p>
 The returned future may never complete.  It will only complete if an error occurs (and 
 parameter <code>exceptionHandler</code> was <code>null</code>), or if it is canceled.  Invoking 
 <code>Future.cancel(boolean)</code> on the returned future is how you would stop 
 providing queue items to the <code>Consumer</code>.  If an <code>exceptionHandler</code> is provided, 
 and you  never want to stop with a <code>cancel(boolean)</code>, the returned future can be 
 ignored.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - The type of object to consume from the queue</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>queue</code> - The queue to poll items from as they are available</dd>
<dd><code>consumer</code> - The <code>Consumer</code> to provide items to as they are available</dd>
<dd><code>exceptionHandler</code> - An optional handler for unexpected errors, or <code>null</code> to stop consumption on error</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A future which can stop consumption through <code>cancel(boolean)</code>, and will report unhandled errors</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>5.37</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
